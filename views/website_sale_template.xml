<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="product_price" inherit_id="website_sale.product_price">
        <xpath expr="//div[@itemprop='offers']" position="attributes">
            <attribute name="t-if">
                website.website_show_price
            </attribute>
        </xpath>
    </template>
    
    <template id="products_item" inherit_id="website_sale.products_item">
        <xpath expr="//div[@itemprop='offers']" position="replace">
            <div itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer" class="product_price" t-if="product.product_variant_ids and website.website_show_price">
                <b>
                    <t t-if="product.website_price_difference and website.get_current_pricelist().discount_policy=='without_discount'">
                        <del class="text-danger mr8" style="white-space: nowrap;" t-esc="compute_currency(product.website_public_price)" t-options="{'widget': 'monetary', 'display_currency': website.get_current_pricelist().currency_id, 'from_currency': website.currency_id}" />
                    </t>
                    
                    <span t-esc="product.website_price" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                    <span itemprop="price" style="display:none;" t-esc="product.website_price" />
                    <span itemprop="priceCurrency" style="display:none;" t-esc="website.currency_id.name" />
                </b>
            </div>
        </xpath>
    </template>
    
    <template id="product_details" inherit_id="website_sale.product_details">
        <xpath expr="//a[@id='add_to_cart']" position="attributes">
            <attribute name="t-if">not is_public_user</attribute>
        </xpath>
    </template>
    
    <template id="cart_lines" inherit_id="website_sale.cart_lines">
        <xpath expr="//td[@name='price']" position="attributes">
            <attribute name="t-if">
                website.website_show_price
            </attribute>
        </xpath>
        <xpath expr="//th[@class='text-center td-price']" position="attributes">
            <attribute name="t-if">
                website.website_show_price
            </attribute>
        </xpath>
    </template>
    
    <template id="sale_total" inherit_id="website_sale.total">
        <xpath expr="//t[@t-name='website_sale.total']" position="attributes">
            <attribute name="t-if">
                website.website_show_price
            </attribute>
        </xpath>
        <xpath expr="//div[@id='order_total_untaxed']" position="replace"/>
        <xpath expr="//div[@id='order_total_taxes']" position="replace"/>
    </template>
</odoo>
